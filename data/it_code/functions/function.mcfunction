execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall unless entity @e[tag=punkt_a] run tellraw @a ["",{"text":"[","bold":true,"color":"dark_aqua"},{"selector":"@p","bold":true,"color":"dark_green"},{"text":" created a new teleportation link]","bold":true,"color":"dark_aqua"}]
execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s unless entity @e[tag=punkt_a,distance=..3] unless entity @e[tag=punkt_b,distance=..3] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall unless entity @e[tag=punkt_a] run summon marker ~ ~ ~ {Tags:["punkt_a","temp"]}
execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall if entity @e[tag=temp] as @e[tag=punkt_a] unless score @s teleporter_id = id_reminder teleporter_id run scoreboard players operation @e[tag=punkt_a,limit=1,sort=nearest] teleporter_id = id_reminder teleporter_id

scoreboard players set tempi teleporter_id 0
execute as @e[tag=punkt_a] if score @s teleporter_id = id_reminder teleporter_id run scoreboard players add tempi teleporter_id 1

execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s unless entity @e[tag=punkt_a,distance=..3] unless entity @e[tag=punkt_b,distance=..3] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall if score tempi teleporter_id matches 0 run tellraw @a ["",{"text":"[","bold":true,"color":"dark_aqua"},{"selector":"@p","bold":true,"color":"dark_green"},{"text":" created a new teleportation link]","bold":true,"color":"dark_aqua"}]
execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s unless entity @e[tag=punkt_a,distance=..3] unless entity @e[tag=punkt_b,distance=..3] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall if score tempi teleporter_id matches 0 run summon marker ~ ~ ~ {Tags:["punkt_a","temp"]}
execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s if entity @e[tag=temp] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall if score tempi teleporter_id matches 0 run scoreboard players operation @e[tag=punkt_a,limit=1,sort=nearest] teleporter_id = id_reminder teleporter_id

execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall if entity @e[tag=temp] run forceload add ~ ~ ~ ~
execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall if entity @e[tag=temp] run playsound minecraft:block.amethyst_block.place block @a ~ ~ ~ 0.5 1
execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall if entity @e[tag=temp] run kill @e[type=item,sort=nearest,limit=3,distance=..1]

execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s unless entity @e[tag=punkt_a,distance=..3] unless entity @e[tag=punkt_b,distance=..3] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall unless score tempi teleporter_id matches 0 unless entity @e[tag=temp] run tellraw @a ["",{"text":"[","bold":true,"color":"dark_aqua"},{"selector":"@p","bold":true,"color":"dark_green"},{"text":" created a teleportation link. Teleportation link is connected now]","bold":true,"color":"dark_aqua"}]
execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s unless entity @e[tag=punkt_a,distance=..3] unless entity @e[tag=punkt_b,distance=..3] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall unless score tempi teleporter_id matches 0 unless entity @e[tag=temp] run summon marker ~ ~ ~ {Tags:["punkt_b","tempi"]}
execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s if entity @e[tag=tempi] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall unless score tempi teleporter_id matches 0 unless entity @e[tag=temp] run scoreboard players operation @e[tag=punkt_b,limit=1,sort=nearest] teleporter_id = id_reminder teleporter_id
execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s if entity @e[tag=tempi] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall unless score tempi teleporter_id matches 0 unless entity @e[tag=temp] run scoreboard players add id_reminder teleporter_id 1

execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall if entity @e[tag=tempi] run forceload add ~ ~ ~ ~
execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall if entity @e[tag=tempi] run playsound minecraft:block.beacon.activate block @a ~ ~ ~ 0.5 1
execute as @e[type=item,nbt={Item:{id:"minecraft:netherite_ingot",Count:1b}}] at @s if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond",Count:4b}}] if entity @e[type=item,distance=..1,nbt={Item:{id:"minecraft:amethyst_cluster",Count:4b}}] if block ~ ~-0.1 ~ minecraft:respawn_anchor if block ~-1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~1 ~-0.1 ~ minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~-1 minecraft:deepslate_tile_stairs if block ~ ~-0.1 ~1 minecraft:deepslate_tile_stairs if block ~-1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~-1 minecraft:polished_deepslate_wall if block ~-1 ~-0.1 ~1 minecraft:polished_deepslate_wall if block ~1 ~-0.1 ~1 minecraft:polished_deepslate_wall if entity @e[tag=tempi] run kill @e[type=item,sort=nearest,limit=3,distance=..1]
scoreboard players set @e[tag=temp] tpcooldown 0
scoreboard players set @e[tag=tempi] tpcooldown 0
tag @e[tag=temp] remove temp
tag @e[tag=tempi] remove tempi
